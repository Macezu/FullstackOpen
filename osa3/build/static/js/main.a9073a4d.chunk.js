(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t(16),o=t.n(a),u=t(5),s=t(17),i=t(3),l=t(4),j=t.n(l),f=function(e){e.key;var n=e.person;for(var t in n)if(n.hasOwnProperty(t))return Object(r.jsxs)("li",{children:[t," ",n[t]]})},b=function(e){var n=e.persons,t=e.filter,c=e.reset,a=n.map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)("button",{onClick:function(){return function(e,n){j.a.delete("".concat("/api/persons","/").concat(e)).catch((function(e){return console.log("error")})),n()}(e.id,c)},children:"delete"})})}));n=n.map((function(e){return e.obj}));var o=[],s=[];if(""!==t){var i,l=n.map((function(e){return Object.keys(e)})).flat().filter((function(e){return e.toUpperCase().includes(t.toUpperCase())})),b=Object(u.a)(n);try{for(b.s();!(i=b.n()).done;){var h,d=i.value,O=Object(u.a)(l);try{for(O.s();!(h=O.n()).done;){var p=h.value;d.hasOwnProperty(p)&&s.push(d)}}catch(m){O.e(m)}finally{O.f()}}}catch(m){b.e(m)}finally{b.f()}o=s.map((function(e,n){return Object(r.jsx)(f,{person:e},n)}))}else o=n.map((function(e,n){return Object(r.jsx)(f,{person:e},n)}));return Object(r.jsxs)("ul",{children:[o,a]})},h=function(e){var n=e.addPerson,t=e.newName,c=e.newNumber,a=e.handleNumberChange,o=e.handleNameChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:t,onChange:o})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:c,onChange:a})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},d=function(e){var n=e.filter,t=e.handleFilterChange;return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:n,onChange:t})]})},O="/api/persons",p=function(e){return alert("Problem with axios log: ".concat(e))},m=function(){return j.a.get(O).then((function(e){return e.data})).catch((function(e){return p(e)}))},v=function(e,n){return j.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data})).catch((function(e){return!0}))},g=function(e){return j.a.post("".concat(O),e).then((function(e){return e.data})).catch((function(e){return Promise.reject(e.response)}))},x=function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),l=Object(i.a)(o,2),j=l[0],f=l[1],O=Object(c.useState)(""),p=Object(i.a)(O,2),x=p[0],w=p[1],y=Object(c.useState)(""),C=Object(i.a)(y,2),N=C[0],P=C[1],S=Object(c.useState)(null),k=Object(i.a)(S,2),T=k[0],E=k[1],F=Object(c.useState)(null),J=Object(i.a)(F,2),L=J[0],U=J[1];Object(c.useEffect)((function(){m().then((function(e){a(e)}))}),[T,L]);var A=function(e){console.log("NYT T\xc4\xc4LL\xc4 ".concat(e)),f(""),w(""),void 0===e&&(E("Successfull operation"),setTimeout((function(){E(null)}),3e3)),!0===e?(console.log("true"),U("Error"),setTimeout((function(){U(null)}),3e3)):(console.log("true"),U(e),setTimeout((function(){U(null)}),3e3))},B=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"success",children:n})},D=function(e){var n=e.message;return null===n?null:Object(r.jsx)("div",{className:"failure",children:n})};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(B,{message:T}),Object(r.jsx)(D,{message:L}),Object(r.jsx)(d,{filter:N,handleFilterChange:function(e){return P(e.target.value)}}),Object(r.jsx)("h3",{children:"Add a new person"}),Object(r.jsx)(h,{newName:j,newNumber:x,addPerson:function(e){e.preventDefault();var n,r="",c=Object(s.a)({},j,x),o=!1,i=Object(u.a)(t);try{for(i.s();!(n=i.n()).done;){var l=n.value;l.obj.hasOwnProperty(j)&&(r=l.id,o=!0)}}catch(f){i.e(f)}finally{i.f()}console.log(c),o?v(r,c).then((function(e){!0===e?A(e):(window.alert("".concat(j," is already added to phonebook, number is going to be updated")),a(t.map((function(n){return n.id!==r?n:e}))))})).catch((function(e){console.log(e.response.data)})):g(c).then((function(e){a(t.concat(e))})).catch((function(e){console.log(e.data.error),A(e.data.error)}))},handleNumberChange:function(e){return w(e.target.value)},handleNameChange:function(e){return f(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(b,{persons:t,filter:N,reset:function(){return A()}})]})};t(41);o.a.render(Object(r.jsx)(x,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.a9073a4d.chunk.js.map