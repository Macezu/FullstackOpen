{"version":3,"sources":["components/Persons.js","components/PersonRecords.js","components/Filter.js","components/Numbers.js","App.js","index.js"],"names":["ListItem","key","person","val","hasOwnProperty","Persons","persons","filter","reset","ids","map","onClick","id","axios","delete","catch","error","console","log","deletePerson","obj","listItems","final","matches","Object","keys","flat","toUpperCase","includes","match","push","i","buildForm","addPerson","newName","newNumber","handleNumberChange","handleNameChange","onSubmit","value","onChange","type","Filter","handleFilterChange","baseUrl","catchError","alert","get","then","response","data","newObject","put","post","Promise","reject","App","useState","setPersons","setNewName","setNewNumber","setFilter","successMessage","setSuccesfull","errorMessage","setErrorMessage","useEffect","Numberbase","initialNums","undefined","setTimeout","Notification","message","className","Error","event","target","PersonRecords","preventDefault","personObject","found","returnedperson","window","returnedbase","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a9073a4d.chunk.js","sourcesContent":["import React from 'react'\r\nimport axios from 'axios'\r\n\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\n\r\nconst ListItem = ({ key,person }) => {\r\n  for (let val in person) {\r\n    if (person.hasOwnProperty(val)) {\r\n      return (<li>{val} {person[val]}</li>)\r\n    }\r\n  }\r\n}\r\n\r\n\r\n\r\nconst deletePerson = (id,reset) => {\r\n  axios.delete(`${baseUrl}/${id}`).catch(error => console.log('error'))\r\n  reset()\r\n\r\n}\r\n\r\nconst Persons = ({ persons,filter,reset }) => {\r\n  let ids = persons.map(person => <li><button onClick={() => deletePerson(person.id,reset)}>delete</button></li>)\r\n  persons = persons.map(person => person.obj)\r\n\r\n\r\n\r\n\r\n  let listItems = []\r\n  const final = []\r\n\r\n  if (filter !== '') {\r\n    const keys = persons.map(person => Object.keys(person)).flat()\r\n    const matches = keys.filter(key => key.toUpperCase().includes(filter.toUpperCase()))\r\n\r\n    for (let obj of persons) {\r\n      for (let match of matches) {\r\n        if (obj.hasOwnProperty(match))\r\n          final.push(obj)\r\n      }\r\n    }\r\n    listItems = final.map((person,i) => <ListItem key={i} person={person} />)\r\n  } else {\r\n    listItems = persons.map((person,i) => <ListItem key={i} person={person} />)\r\n  }\r\n\r\n\r\n\r\n\r\n  return (\r\n    <ul>\r\n      {listItems}{ids}\r\n    </ul>\r\n  )\r\n\r\n}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\n\r\n\r\nconst buildForm = ({addPerson, newName, newNumber, handleNumberChange, handleNameChange}) => {\r\n\r\n    return (\r\n        <form onSubmit={addPerson}>\r\n            <div>\r\n                name: <input value={newName} onChange={handleNameChange} />\r\n            </div>\r\n            <div>\r\n                number: <input value={newNumber} onChange={handleNumberChange} />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default buildForm\r\n\r\n\r\n\r\n\r\n","import React from 'react'\r\n\r\nconst Filter = ({filter,handleFilterChange}) =>{\r\n\r\n\r\n    return (\r\n        <div>\r\n                filter shown with <input value={filter} onChange={handleFilterChange} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAllNumbers =() => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data).catch(error => catchError(error))\r\n}\r\n\r\nconst create = newObject => {\r\n    const request = axios.post(`${baseUrl}`,newObject)\r\n    return request.then(response => response.data).catch(error =>{ \r\n        return Promise.reject(error.response);\r\n    })\r\n}\r\n\r\nconst updateNumber = (id,newObject) => {\r\n\r\n    const request = axios.put(`${baseUrl}/${id}`,newObject)\r\n    return request.then(response => response.data).catch(error => true)\r\n}\r\n\r\n\r\n\r\n\r\nconst catchError = error => (alert(`Problem with axios log: ${error}`))\r\n    \r\n\r\nexport default {\r\n    getAllNumbers,\r\n    updateNumber,\r\n    create\r\n}","import React,{ useEffect,useState } from 'react'\nimport Persons from './components/Persons'\nimport PersonRecords from './components/PersonRecords'\nimport Filter from './components/Filter'\nimport Numberbase from './components/Numbers'\n\nconst App = () => {\n  const [persons,setPersons] = useState([])\n\n  const [newName,setNewName] = useState('')\n  const [newNumber,setNewNumber] = useState('')\n  const [filter,setFilter] = useState('')\n  const [successMessage,setSuccesfull] = useState(null)\n  const [errorMessage,setErrorMessage] = useState(null)\n\n\n  const handleNameChange = (event) => (setNewName(event.target.value))\n  const handleNumberChange = (event) => (setNewNumber(event.target.value))\n  const handleFilterChange = (event) => (setFilter(event.target.value))\n\n  useEffect(() => {\n    Numberbase\n      .getAllNumbers()\n      .then(initialNums => {\n        setPersons(initialNums)\n      })\n  },[successMessage,errorMessage])\n\n  const reset = (error) => {\n    console.log(`NYT TÄÄLLÄ ${error}`)\n    setNewName('')\n    setNewNumber('')\n    if (error === undefined) {\n      setSuccesfull(`Successfull operation`)\n      setTimeout(() => {\n        setSuccesfull(null)\n      },3000)\n    } if (error === true) {\n      console.log('true')\n      setErrorMessage(\"Error\")\n      setTimeout(() => {\n        setErrorMessage(null)\n      },3000)\n    } else {\n      console.log('true')\n      setErrorMessage(error)\n      setTimeout(() => {\n        setErrorMessage(null)\n      },3000)\n    }\n\n  }\n\n\n  const Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n\n    return (\n      <div className=\"success\">\n        {message}\n      </div>\n    )\n\n\n  }\n\n  const Error = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n\n    return (\n      <div className=\"failure\">\n        {message}\n      </div>\n    )\n\n\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    let id = \"\"\n    const personObject = {\n      [newName]: newNumber\n    }\n\n    let found = false\n\n    for (let person of persons) {\n      if (person.obj.hasOwnProperty(newName)) {\n        id = person.id\n        found = true\n\n      }\n    }\n\n    console.log(personObject)\n\n    if (found) {\n      Numberbase\n        .updateNumber(id,personObject)\n        .then(returnedperson => {\n          if (returnedperson === true) {\n            reset(returnedperson)\n          } else {\n            window.alert(`${newName} is already added to phonebook, number is going to be updated`)\n            setPersons(persons.map(person => person.id !== id ? person : returnedperson))\n          }\n\n\n        }).catch(error => {\n          console.log(error.response.data)\n        })\n\n\n    } else {\n      Numberbase\n        .create(personObject)\n        .then(returnedbase => {\n          setPersons(persons.concat(returnedbase))\n        }).catch(error => {\n          console.log(error.data.error)\n          reset(error.data.error)\n        })\n    }\n\n  }\n\n\n\n  return (\n    <>\n      <h2>Phonebook</h2>\n      <Notification message={successMessage} />\n      <Error message={errorMessage} />\n      <Filter filter={filter} handleFilterChange={handleFilterChange} />\n      <h3>Add a new person</h3>\n      <PersonRecords newName={newName} newNumber={newNumber} addPerson={addPerson}\n        handleNumberChange={handleNumberChange} handleNameChange={handleNameChange} />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} reset={() => reset()} />\n    </>\n  )\n\n}\n\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}